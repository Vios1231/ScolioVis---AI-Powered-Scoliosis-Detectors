<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>ScolioCheck - Scoliosis Detection</title>  
        
    <script src="https://cdn.tailwindcss.com"></script>  
    
    <style>  
        #imagePreview {  
            max-width: 100%;  
            max-height: 400px;  
            object-fit: contain;  
        }  
    </style>  
</head>  
<body class="bg-gray-50 flex flex-col min-h-screen">  
    <header class="w-full flex justify-between items-center p-4 bg-white shadow-md z-10">  
        <h1 class="text-2xl font-bold text-blue-600">ScolioCheck</h1>  
        <nav>  
            <a href="{{ url_for('index') }}" class="text-gray-600 hover:text-blue-600 mx-2">Home</a>  
            <a href="{{ url_for('about') }}" class="text-gray-600 hover:text-blue-600 mx-2">About</a>  
            <a href="{{ url_for('paper') }}" class="text-gray-600 hover:text-blue-600 mx-2">Paper</a>  
        </nav>  
    </header>  

    <main class="flex flex-col items-center justify-start p-8 flex-grow relative">  
        <h2 class="text-3xl font-bold mb-4 text-center">Your <span class="text-blue-600">AI-Powered</span> Scoliosis Detector</h2>  
        
        <div class="border-2 border-dashed border-gray-400 rounded-lg p-6 mb-6 w-full max-w-md text-center">  
            <input   
                type="file"   
                id="imageUpload"   
                accept="image/*"   
                class="hidden"  
                onchange="previewImage(event)"  
            >  
            <label   
                for="imageUpload"   
                class="block w-full text-center bg-blue-500 text-white py-2 rounded cursor-pointer hover:bg-blue-600 transition"  
            >  
                Upload a spine X-ray image  
            </label>  
            <p class="mt-2 text-gray-600">and get result within seconds!</p>  
            <img id="imagePreview" class="mx-auto mt-4" style="display:none;">  
        </div>  

        <button   
            id="detectButton"   
            class="w-full max-w-md bg-green-500 text-white py-2 rounded hover:bg-green-600 transition"  
            onclick="detectScoliosis()"  
            disabled  
        >  
            Detect Scoliosis  
        </button>  

        <div id="resultContainer" class="mt-4 text-center"></div>  

        <div class="mt-8 text-center">  
            <p class="text-gray-600">â†“ Or try with these example spine images!</p>  
            <div class="flex justify-center mt-4 space-x-2">  
                <img src="{{ url_for('static', filename='assets/example1.jpg') }}" alt="Example 1" onclick="uploadExampleImage(this)" class="w-24 h-24 object-cover rounded shadow cursor-pointer hover:opacity-75 transition" />  
                <img src="{{ url_for('static', filename='assets/example2.jpg') }}" alt="Example 2" onclick="uploadExampleImage(this)" class="w-24 h-24 object-cover rounded shadow cursor-pointer hover:opacity-75 transition" />  
                <img src="{{ url_for('static', filename='assets/example3.jpg') }}" alt="Example 3" onclick="uploadExampleImage(this)" class="w-24 h-24 object-cover rounded shadow cursor-pointer hover:opacity-75 transition" />  
                <img src="{{ url_for('static', filename='assets/example4.jpg') }}" alt="Example 4" onclick="uploadExampleImage(this)" class="w-24 h-24 object-cover rounded shadow cursor-pointer hover:opacity-75 transition" />  
            </div>  
        </div>  
    </main>  

    <section class="bg-white p-8 mt-8 w-full">  
        <div class="max-w-6xl mx-auto">  
            <h3 class="text-3xl font-bold text-center mb-6 text-blue-700">What is ScolioCheck?</h3>  
            <p class="text-center text-lg text-gray-600 mb-10 max-w-3xl mx-auto">  
                ScolioCheck is an innovative AI-driven tool that accurately analyzes spinal X-ray images to detect scoliosis.   
                Leveraging advanced machine learning technologies, we provide a quick, reliable, and user-friendly solution   
                for early scoliosis detection.  
            </p>  
            
            <div class="flex justify-around space-x-6 mb-12">  
                <div class="text-center bg-blue-50 p-6 rounded-lg shadow-md transition hover:shadow-xl hover:scale-105">  
                    <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-md">  
                        <span class="text-4xl">ðŸ“„</span>  
                    </div>  
                    <h4 class="text-xl font-semibold mb-2 text-blue-800">Upload Image</h4>  
                    <p class="text-gray-600">Easily upload your spine X-ray with just a few clicks</p>  
                </div>  
                <div class="text-center bg-blue-50 p-6 rounded-lg shadow-md transition hover:shadow-xl hover:scale-105">  
                    <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-md">  
                        <span class="text-4xl">ðŸ§ </span>  
                    </div>  
                    <h4 class="text-xl font-semibold mb-2 text-blue-800">AI Analysis</h4>  
                    <p class="text-gray-600">Our advanced AI processes the image instantly</p>  
                </div>  
                <div class="text-center bg-blue-50 p-6 rounded-lg shadow-md transition hover:shadow-xl hover:scale-105">  
                    <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-md">  
                        <span class="text-4xl">âœ…</span>  
                    </div>  
                    <h4 class="text-xl font-semibold mb-2 text-blue-800">Instant Result</h4>  
                    <p class="text-gray-600">Receive a detailed scoliosis detection report</p>  
                </div>  
            </div>  
        </div>  
    </section>  
    
    <section class="bg-gray-50 p-8 w-full">  
        <div class="max-w-6xl mx-auto">  
            <h3 class="text-3xl font-bold text-center mb-8 text-blue-700">Why Choose ScolioCheck?</h3>  
            
            <div class="flex justify-center space-x-8">  
                <div class="bg-white w-1/2 p-8 rounded-lg shadow-lg hover:shadow-xl transition">  
                    <div class="flex items-center mb-4">  
                        <div class="bg-green-100 p-4 rounded-full mr-4">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">  
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />  
                            </svg>  
                        </div>  
                        <h4 class="text-2xl font-semibold text-green-800">High Accuracy</h4>  
                    </div>  
                    <p class="text-gray-600">  
                        Our CNN model, trained on a comprehensive vertebrae X-ray dataset from King Abdulrahman University Hospital,   
                        achieves an impressive 88.02% accuracy in scoliosis detection.  
                    </p>  
                </div>  
                
                <div class="bg-white w-1/2 p-8 rounded-lg shadow-lg hover:shadow-xl transition">  
                    <div class="flex items-center mb-4">  
                        <div class="bg-blue-100 p-4 rounded-full mr-4">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">  
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />  
                            </svg>  
                        </div>  
                        <h4 class="text-2xl font-semibold text-blue-800">Rapid Results</h4>  
                    </div>  
                    <p class="text-gray-600">  
                        Experience lightning-fast analysis with results delivered in under 5 seconds,   
                        making it perfect for quick assessments in clinical settings or personal monitoring.  
                    </p>  
                </div>  
            </div>  
        </div>  
    </section>  

    <footer class="bg-white p-6 w-full text-center shadow-md">  
        <div class="flex justify-center space-x-8 mb-4">  
            <a href="{{ url_for('index') }}" class="text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition">Home</a>  
            <a href="{{ url_for('about') }}" class="text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition">About</a>  
            <a href="{{ url_for('paper') }}" class="text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-600 transition">Paper</a>  
        </div>  
        <p class="text-gray-600 mb-4">  
            This is part of an undergraduate research paper by Andy Saputra, Jonathan Alvios, and Hernicksen Satria for Bina Nusantara University. All Rights Reserved.  
        </p>  
        <div class="flex flex-col items-center">  
            <img src="{{ url_for('static', filename='assets/binus-logo.png') }}" alt="BINUS University" class="h-16 mb-2">  
            <span class="text-blue-600 font-bold text-lg">BINUS UNIVERSITY</span>  
            <span class="text-gray-600">School of Computer Science</span>  
        </div>  
    </footer>  

    <script>  
        function uploadExampleImage(imgElement) {  
            fetch(imgElement.src)  
            .then(response => response.blob())  
            .then(blob => {  
             
                const file = new File([blob], 'example-image.jpg', { type: 'image/jpeg' });  
                
                const dataTransfer = new DataTransfer();  
                dataTransfer.items.add(file);  
                
                const fileInput = document.getElementById('imageUpload');  
                
                fileInput.files = dataTransfer.files;  
                
                const event = new Event('change');  
                fileInput.dispatchEvent(event);  

                const exampleImages = document.querySelectorAll('main img[onclick]');  
                exampleImages.forEach(img => img.classList.remove('border-4', 'border-blue-500'));  
                imgElement.classList.add('border-4', 'border-blue-500');  
            });  
        }

        function previewImage(event) {  
            const file = event.target.files[0];  
            if (!file) return;

            const reader = new FileReader();  

            reader.onload = function(e) {  
                const preview = document.getElementById('imagePreview');  
                preview.src = e.target.result;  
                preview.style.display = 'block';  

                const detectButton = document.getElementById('detectButton');
                detectButton.disabled = false;
            }  

            reader.readAsDataURL(file);  
        }  

        async function detectScoliosis() {  
            const fileInput = document.getElementById('imageUpload');  
            const file = fileInput.files[0];  
            if (!file) {  
                alert('Please upload an image first');  
                return;  
            }  

            const formData = new FormData();  
            formData.append('file', file);  

            const detectButton = document.getElementById('detectButton');
            detectButton.disabled = true;
            detectButton.innerText = 'Processing...';

            try {  
                const response = await fetch('/', {  
                    method: 'POST',  
                    body: formData  
                });  

                if (!response.ok) {  
                    const errorData = await response.json();
                    alert(errorData.result || 'An error occurred during image processing.');
                    detectButton.disabled = false;
                    detectButton.innerText = 'Detect Scoliosis';
                    return;  
                }  

                const data = await response.json();  

                const resultContainer = document.getElementById('resultContainer');  
                if (data.result) {  
                    if (data.result === "Scoliosis Detected") {  
                        resultContainer.innerHTML = `  
                            <p class="text-red-600 font-bold">  
                                ${data.result} 
                            </p>  
                        `;  
                    } else if (data.result === "Normal Detected") {  
                        resultContainer.innerHTML = `  
                            <p class="text-green-600 font-bold">  
                                ${data.result} 
                            </p>  
                        `;  
                    } else {  
                        resultContainer.innerHTML = `  
                            <p class="text-blue-600 font-bold">  
                                ${data.result} 
                            </p>  
                        `;  
                    }  
                } else {  
                    resultContainer.innerHTML = `<p class="text-red-600 font-bold">Error processing the image.</p>`;  
                }  

                detectButton.disabled = false;
                detectButton.innerText = 'Detect Scoliosis';
            } catch (error) {  
                console.error('Error:', error);  
                alert('An error occurred while processing the image.');  
                detectButton.disabled = false;
                detectButton.innerText = 'Detect Scoliosis';
            }  
        }  
    </script>
</body>  
</html>
